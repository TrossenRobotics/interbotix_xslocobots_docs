<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MoveIt Interface and API &mdash; Interbotix X-Series LoCoBot Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python Demos" href="python_demos.html" />
    <link rel="prev" title="Navigation Stack Configuration" href="navigation_stack_configuration.html" />
   
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "nglikgkapv");
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <div class="sidebartitle-docs-home">
    <a href="https://docs.trossenrobotics.com/" target="_blank" class="icon icon-home">
      &nbsp;Trossen Robotics Docs Home
    </a>
    <div class="sidebartitle-docs-home-hr">
      <hr>
    </div>
  </div>
  

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_xslocobots.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_interface.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_interface.html">Python-ROS Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ros1_packages.html">ROS 1 Open Source Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="locobot_descriptions.html">LoCoBot Descriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="locobot_control.html">LoCoBot Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo_simulation_configuration.html">Gazebo Simulation Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_control.html">ROS Controllers Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_motion_planning_configuration.html">MoveIt Motion Planning Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception_pipeline_configuration.html">Perception Pipeline Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation_stack_configuration.html">Navigation Stack Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MoveIt Interface and API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python_demos.html">Python Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="joystick_control.html">Joystick Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="landmark_based_navigation.html">Landmark-Based Navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ros2_packages.html">ROS 2 Open Source Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Interbotix X-Series LoCoBots Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../ros1_packages.html">ROS 1 Open Source Packages</a></li>
      <li class="breadcrumb-item active">MoveIt Interface and API</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xslocobots_docs/blob/main/docs/ros1_packages/moveit_interface_and_api.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="moveit-interface-and-api">
<h1>MoveIt Interface and API<a class="headerlink" href="#moveit-interface-and-api" title="Permalink to this headline"></a></h1>
<a href="https://github.com/Interbotix/interbotix_ros_rovers/tree/main/interbotix_ros_xslocobots/examples/interbotix_xslocobot_moveit_interface"
    class="docs-view-on-github-button"
    target="_blank">
    <img src="../_static/GitHub-Mark-Light-32px.png"
        class="docs-view-on-github-button-gh-logo">
    View Package on GitHub
</a><div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>This package contains a small API modeled after the <a class="reference external" href="https://github.com/ros-planning/moveit_tutorials/blob/482dc9db944c785870274c35223b4d06f2f0bc90/doc/move_group_interface/src/move_group_interface_tutorial.cpp" rel="noopener noreferrer" target="_blank">Move Group C++ Interface Tutorial</a> that
allows a user to command desired end-effector poses to an arm on an Interbotix X-Series LoCoBot. It
is not meant to be all-encompassing but rather should be viewed as a starting point for someone
interested in creating their own MoveIt interface to interact with an arm. With it comes a small
GUI that can be used to pose the end-effector.</p>
<p>Finally, this package also contains a modified version of the <a class="reference external" href="https://github.com/ros-planning/moveit_tutorials/blob/482dc9db944c785870274c35223b4d06f2f0bc90/doc/move_group_python_interface/scripts/move_group_python_interface_tutorial.py" rel="noopener noreferrer" target="_blank">Move Group Python Interface
Tutorial</a> script that can be used as a guide for those users who would like to interface with an
Interbotix robot via the MoveIt Commander Python module.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline"></a></h2>
<img alt="../_images/xslocobot_moveit_interface_flowchart.png" class="align-center" src="../_images/xslocobot_moveit_interface_flowchart.png" />
<p>As shown above, this package builds on top of both the <cite>interbotix_xslocobot_gazebo</cite> and
<cite>interbotix_xslocobot_control</cite> packages. To get familiar with those packages, please refer to their
respective READMEs. The <cite>interbotix_xslocobot_moveit_interface</cite> nodes are described below:</p>
<ul class="simple">
<li><strong>moveit_interface</strong> - a small C++ API that makes it easier for a user to command custom poses
to the end-effector of an Interbotix arm; it uses MoveIt's planner behind the scenes to
generate desired joint trajectories</li>
<li><strong>moveit_interface_gui</strong> - a GUI (modeled after the one in the <cite>joint_state_publisher</cite> package)
that allows a user to enter in desired end-effector poses via text fields or sliders; it uses
the <strong>moveit_interface</strong> API to plan and execute trajectories</li>
<li><strong>moveit_python_interface</strong> - a modified version of the script used in the <a class="reference external" href="https://github.com/ros-planning/moveit_tutorials/blob/482dc9db944c785870274c35223b4d06f2f0bc90/doc/move_group_python_interface/scripts/move_group_python_interface_tutorial.py" rel="noopener noreferrer" target="_blank">Move Group Python
Interface Tutorial</a> that is meant to work with an Interbotix arm; just press 'Enter' in the
terminal to walk through the different steps; the desired joint state goal, pose goal, and
end-effector offset (when attaching the box) are stored in YAML files located in the
<a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/examples/interbotix_xslocobot_moveit_interface/config" rel="noopener noreferrer" target="_blank">config</a> directory</li>
</ul>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<p>To run this package on the physical robot using the small C++ API &amp; GUI, type the line below in a
terminal (assuming the 'locobot_wx200' with lidar is being launched).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch<span class="w"> </span>interbotix_xslocobot_moveit_interface<span class="w"> </span>xslocobot_moveit_interface.launch<span class="w"> </span>robot_model:<span class="o">=</span>locobot_wx200<span class="w"> </span>show_lidar:<span class="o">=</span><span class="nb">true</span><span class="w"> </span>use_actual:<span class="o">=</span><span class="nb">true</span><span class="w"> </span>use_cpp_interface:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>A GUI should pop-up similar to the one below. In it, a user should specify the desired position and
orientation of the end-effector (as defined by the 'ee_gripper_link' w.r.t. the 'base_footprint'
frame). This can be done either via the slider bars or by entering values into the text fields.
Next, a user can press one of five buttons. They are:</p>
<ul class="simple">
<li><strong>Plan Pose</strong> - MoveIt will attempt to find a trajectory that places the end-effector at the
desired position and orientation</li>
<li><strong>Plan Position</strong> - MoveIt will attempt to find a trajectory that places the end-effector at
the desired position, ignoring orientation</li>
<li><strong>Plan Orientation</strong> - MoveIt will attempt to find a trajectory that places the end-effector at
the desired orientation, ignoring position; note that the planner fails more often than not for
this option</li>
<li><strong>Execute</strong> - Once a valid plan has been found, this button can be pressed to actually execute
the trajectory on the robot</li>
<li><strong>Reset</strong> - This resets all slider bars to the middle and text fields to '0.00'</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Occasionally, MoveIt will be unsuccessful in finding a valid trajectory. This could be for one
of two reasons. Either the desired pose is not physically attainable by the arm or the random
seed generated by MoveIt was a bad guess. If it is clear that the pose is physically
attainable, try hitting the desired 'Plan' button a few more times.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is significantly more difficult for the planner to find a valid trajectory when specifying
poses and orientations rather than just positions, especially for lower dof arms.</p>
</div>
<img alt="../_images/moveit_interface_gui.png" class="align-center" src="../_images/moveit_interface_gui.png" />
<p>To run this package on the physical robot using the python interface, type the line below in a
terminal (assuming the locobot_wx250s with no lidar is being launched).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch<span class="w"> </span>interbotix_xslocobot_moveit_interface<span class="w"> </span>xslocobot_moveit_interface.launch<span class="w"> </span>robot_model:<span class="o">=</span>locobot_wx250s<span class="w"> </span>use_actual:<span class="o">=</span><span class="nb">true</span><span class="w"> </span>dof:<span class="o">=</span><span class="m">6</span><span class="w"> </span>use_python_interface:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>After MoveIt finishes loading, press 'Enter' in the terminal to step through the tutorial.</p>
<p>This is the bare minimum needed to get up and running. Take a look at the table below to see how to
further customize with other launch file arguments.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="55%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>robot_model</td>
<td>model type of the Interbotix LoCoBot such as 'locobot_base' or 'locobot_wx250s'</td>
<td>&quot;&quot;</td>
</tr>
<tr class="row-odd"><td>robot_name</td>
<td>name of the robot (could be anything but defaults to 'locobot')</td>
<td>&quot;locobot&quot;</td>
</tr>
<tr class="row-even"><td>show_lidar</td>
<td>set to 'true' if the lidar is installed on the robot; this will load the lidar related links to the 'robot_description' parameter for collision purposes;</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>external_urdf_loc</td>
<td>the file path to the custom urdf.xacro file that you would like to include in the Interbotix robot's urdf.xacro file</td>
<td>&quot;&quot;</td>
</tr>
<tr class="row-even"><td>external_srdf_loc</td>
<td>the file path to the custom srdf.xacro file that you would like to include in the Interbotix robot's srdf.xacro file. Note that this should only contain 'disable collision' tags for collisions between the original Interbotix Arm and other links that are defined in the file specified by&nbsp;external_urdf_loc</td>
<td>&quot;&quot;</td>
</tr>
<tr class="row-odd"><td>mode_configs</td>
<td>the file path to the 'mode config' YAML file</td>
<td>refer to&nbsp;<a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/examples/interbotix_xslocobot_moveit_interface/launch/xslocobot_moveit_interface.launch" rel="noopener noreferrer" target="_blank">xslocobot_moveit_interface.launch</a></td>
</tr>
<tr class="row-even"><td>use_gazebo</td>
<td>launch MoveIt with a Gazebo simulated robot</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>use_actual</td>
<td>launch MoveIt with the physical robot</td>
<td>false</td>
</tr>
<tr class="row-even"><td>use_fake</td>
<td>launch MoveIt with a MoveIt generated fake robot</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>dof</td>
<td>the degrees of freedom of the arm</td>
<td>5</td>
</tr>
<tr class="row-even"><td>use_camera</td>
<td>if true, the RealSense D435 camera nodes are launched; note that the main idea behind this is to generate an Occupancy Map for MoveIt to use when collision checking; however, this feature is not fully implemented yet</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>use_moveit_rviz</td>
<td>set to false if you would like to use MoveIt in a headless state; otherwise, set to true to display RViz with the MoveIt plugin</td>
<td>true</td>
</tr>
<tr class="row-even"><td>world_name</td>
<td>the file path to the Gazebo 'world' file to load (if simulating)</td>
<td>refer to&nbsp;<a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/examples/interbotix_xslocobot_moveit_interface/launch/xslocobot_moveit_interface.launch" rel="noopener noreferrer" target="_blank">xslocobot_moveit_interface.launch</a></td>
</tr>
<tr class="row-odd"><td>use_cpp_interface</td>
<td>launch the custom C++ API node</td>
<td>false</td>
</tr>
<tr class="row-even"><td>moveit_interface_gui</td>
<td>launch a custom GUI to interface with the&nbsp;<strong>moveit_interface</strong>&nbsp;node so that you can command specific end-effector poses (defined by 'ee_gripper_link')</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>use_python_interface</td>
<td>launch the Python Interface Tutorial node</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="navigation_stack_configuration.html" class="btn btn-neutral float-left" title="Navigation Stack Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="python_demos.html" class="btn btn-neutral float-right" title="Python Demos" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Trossen Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>