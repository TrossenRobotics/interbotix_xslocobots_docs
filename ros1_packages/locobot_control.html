<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LoCoBot Control &mdash; Interbotix X-Series LoCoBot Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gazebo Simulation Configuration" href="gazebo_simulation_configuration.html" />
    <link rel="prev" title="LoCoBot Descriptions" href="locobot_descriptions.html" />
   
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-PZQLS2V"
      height="0"
      width="0"
      style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <div class="sidebartitle-docs-home">
    <a href="https://docs.trossenrobotics.com/" target="_blank" class="icon icon-home">
      &nbsp;Trossen Robotics Docs Home
    </a>
    <div class="sidebartitle-docs-home-hr">
      <hr>
    </div>
  </div>
  
            <a href="../index.html">
            <img src="../_static/logo_xslocobots.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_interface.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_interface.html">Python-ROS Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ros1_packages.html">ROS 1 Open Source Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="locobot_descriptions.html">LoCoBot Descriptions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">LoCoBot Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gazebo_simulation_configuration.html">Gazebo Simulation Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_control.html">ROS Controllers Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_motion_planning_configuration.html">MoveIt Motion Planning Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception_pipeline_configuration.html">Perception Pipeline Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation_stack_configuration.html">Navigation Stack Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_interface_and_api.html">MoveIt Interface and API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_demos.html">Python Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="joystick_control.html">Joystick Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="landmark_based_navigation.html">Landmark-Based Navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ros2_packages.html">ROS 2 Open Source Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Interbotix X-Series LoCoBots Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../ros1_packages.html">ROS 1 Open Source Packages</a></li>
      <li class="breadcrumb-item active">LoCoBot Control</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xslocobots_docs/blob/main/docs/ros1_packages/locobot_control.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="locobot-control">
<h1>LoCoBot Control<a class="headerlink" href="#locobot-control" title="Permalink to this headline"></a></h1>
<a href="https://github.com/Interbotix/interbotix_ros_rovers/tree/main/interbotix_ros_xslocobots/interbotix_xslocobot_control"
    class="docs-view-on-github-button"
    target="_blank">
    <img src="../_static/GitHub-Mark-Light-32px.png"
        class="docs-view-on-github-button-gh-logo">
    View Package on GitHub
</a><div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>This package contains the configuration and launch files necessary to easily start the various
components of the X-Series LoCoBot platform. This includes launching the <strong>xs_sdk</strong> node
responsible for driving the DYNAMIXEL motors on the robot, loading the URDF to the
<code class="docutils literal notranslate"><span class="pre">robot_description</span></code> parameter, starting the mobile base, and activating the RealSense D435 camera
and RPLidar 2D laser scanner. Essentially, this package is what all 'downstream' ROS packages
should reference to get the robot up and running.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline"></a></h2>
<img alt="../_images/xslocobot_control_flowchart.png" class="align-center" src="../_images/xslocobot_control_flowchart.png" />
<p>As shown in the image above, the <em>interbotix_xslocobot_control</em> package builds on top of the
<em>interbotix_xslocobot_descriptions</em> and <em>interbotix_xs_sdk</em> packages among many others. To get
familiar with the nodes not described below, just hop over to the ROS packages in this repo that
launches them.</p>
<ul class="simple">
<li><strong>rplidarNode</strong>: responsible for starting the <a class="reference external" href="https://www.slamtec.com/en/Lidar/A2" rel="noopener noreferrer" target="_blank">A2M8 RPlidar</a> sensor and publishing
<a class="reference external" href="http://docs.ros.org/latest/api/sensor_msgs/html/msg/LaserScan.html" rel="noopener noreferrer" target="_blank">LaserScan</a> messages on the <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/scan</span></code> topic. See the <a class="reference external" href="http://wiki.ros.org/rplidar" rel="noopener noreferrer" target="_blank">RPLidar ROS Wiki</a> for
parameter descriptions. All parameters were left at their default values except for the
following:<ul>
<li><em>frame_id</em>: <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/laser_frame_link</span></code></li>
<li><em>serial_port</em>: <code class="docutils literal notranslate"><span class="pre">/dev/rplidar</span></code></li>
<li><em>angle_compensate</em>: <code class="docutils literal notranslate"><span class="pre">true</span></code></li>
</ul>
</li>
<li><strong>kobuki nodes</strong>: a group of three nodes responsible for starting the Kobuki base. See the
<a class="reference external" href="http://wiki.ros.org/kobuki_node" rel="noopener noreferrer" target="_blank">Kobuki ROS Wiki</a> for parameter descriptions. All parameters were left at their default values
except for the following:<ul>
<li><em>odom_frame</em>: <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/odom</span></code></li>
<li><em>base_frame</em>: <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/base_footprint</span></code></li>
<li><em>acceleration_limiter</em>: <code class="docutils literal notranslate"><span class="pre">true</span></code></li>
</ul>
</li>
<li><strong>rs_rgbd.launch</strong>: launches four nodes to run the <a class="reference external" href="https://www.intelrealsense.com/depth-camera-d435/" rel="noopener noreferrer" target="_blank">RealSense D435</a> camera and publish a
variety of image topics. Note that the <cite>base_link</cite> frame of the camera is in the depth frame
and is called <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/camera_link</span></code>. See the <a class="reference external" href="https://github.com/IntelRealSense/realsense-ros" rel="noopener noreferrer" target="_blank">realsense_ros</a> repository for parameter
descriptions. All parameters were left at their default values except for the following:<ul>
<li><em>tf_prefix</em>: <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/camera</span></code></li>
<li><em>enable_infra1</em>: <code class="docutils literal notranslate"><span class="pre">true</span></code></li>
<li><em>enable_infra2</em>: <code class="docutils literal notranslate"><span class="pre">true</span></code></li>
</ul>
</li>
</ul>
<p>You will also notice a <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/interbotix_xslocobot_control/config" rel="noopener noreferrer" target="_blank">config</a> directory containing many YAML files. Each file (beside the
modes.yaml one) specifies the names and initial register values for all the motors that make up a
specific locobot. There is also some 'meta-info' like names of joint groups, the desired
joint-topic name and publishing frequency, etc... For a full explanation of each of these
parameters, check out the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_core/blob/main/interbotix_ros_xseries/interbotix_xs_sdk/config/motor_configs_template.yaml" rel="noopener noreferrer" target="_blank">Motor Config file template</a>. The other file located in that directory
is the Mode Config one (a.k.a mode.yaml). The parameters in there define the desired operating
modes for either a group of joints or single joints, and whether or not they should be torqued
on/off at node startup. See more by referencing the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_core/blob/main/interbotix_ros_xseries/interbotix_xs_sdk/config/mode_configs_template.yaml" rel="noopener noreferrer" target="_blank">Mode Config file template</a>. Typically, the
Motor Config file is only defined here while the Mode Config file is also defined in any
'downstream' ROS package. This makes it easy for users to configure their desired motor operating
modes depending on their project.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<p>To run this package on the physical robot, type the line below in a terminal
(assuming the <code class="docutils literal notranslate"><span class="pre">locobot_wx200</span></code> is being launched with the onboard lidar and
camera).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xslocobot_control xslocobot_control.launch robot_model:<span class="o">=</span>locobot_wx200 use_base:<span class="o">=</span><span class="nb">true</span> use_lidar:<span class="o">=</span><span class="nb">true</span> use_camera:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>If you are working from a remote computer and would like to visualize the robot using RViz, open a
terminal on your remote and type...</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xslocobot_descriptions remote_view.launch
</pre></div>
</div>
<p>Note that in order for this to work, you must first run the <a class="reference external" href="https://www.trossenrobotics.com/docs/interbotix_xslocobots/ros_interface/software_setup.html#remote-install" rel="noopener noreferrer" target="_blank">remote installation</a> script on your
remote computer.</p>
<p>To further customize the launch file at run-time, refer to the table below.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="60%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>robot_model</td>
<td>model type of the Interbotix LoCoBot such as 'locobot_base' or 'locobot_wx250s'</td>
<td>&quot;&quot;</td>
</tr>
<tr class="row-odd"><td>robot_name</td>
<td>name of the robot (could be anything but defaults to 'locobot')</td>
<td>&quot;locobot&quot;</td>
</tr>
<tr class="row-even"><td>show_gripper_bar</td>
<td>if true, the gripper_bar link is included in the 'robot_description' parameter; if false, the gripper_bar and finger links are not loaded to the parameter server. Set to false if you have a custom gripper attachment</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>show_gripper_fingers</td>
<td>if true, the gripper fingers are included in the 'robot_description' parameter; if false, the gripper finger links are not loaded to the parameter server. Set to false if you have custom gripper fingers</td>
<td>true</td>
</tr>
<tr class="row-even"><td>external_urdf_loc</td>
<td>the file path to the custom urdf.xacro file that you would like to include in the Interbotix robot's urdf.xacro file</td>
<td>&quot;&quot;</td>
</tr>
<tr class="row-odd"><td>use_rviz</td>
<td>launches RViz; if you are SSH'd into the robot, DON'T set this to true</td>
<td>false</td>
</tr>
<tr class="row-even"><td>rviz_frame</td>
<td>fixed frame in RViz; this should be changed to <code class="docutils literal notranslate"><span class="pre">map</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;robot_name&gt;/odom</span></code> if mapping or using local odometry respectively</td>
<td>$(arg robot_name)/base_footprint</td>
</tr>
<tr class="row-odd"><td>use_base</td>
<td>if true, the Kobuki ROS nodes are launched</td>
<td>false</td>
</tr>
<tr class="row-even"><td>use_dock</td>
<td>if true, loads Kobuki AutoDock features</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>use_lidar</td>
<td>if true, the RPLidar node is launched</td>
<td>false</td>
</tr>
<tr class="row-even"><td>show_lidar</td>
<td>set to true if the lidar is installed on the robot; this will load the lidar related links to the 'robot_description' parameter</td>
<td>$(arg use_lidar)</td>
</tr>
<tr class="row-odd"><td>use_camera</td>
<td>if true, the RealSense D435 camera nodes are launched</td>
<td>false</td>
</tr>
<tr class="row-even"><td>filters</td>
<td>types of RealSense camera filters to use (in this case, the 'pointcloud' filter is needed)</td>
<td>pointcloud</td>
</tr>
<tr class="row-odd"><td>align_depth</td>
<td>whether to publish topics with the depth stream aligned with the color stream</td>
<td>false</td>
</tr>
<tr class="row-even"><td>color_fps</td>
<td>frame rate of the color images taken on the RealSense camera</td>
<td>30</td>
</tr>
<tr class="row-odd"><td>depth_fps</td>
<td>frame rate of the depth images taken on the RealSense camera</td>
<td>30</td>
</tr>
<tr class="row-even"><td>color_width</td>
<td>horizontal resolution of the color images taken on the RealSense camera</td>
<td>640</td>
</tr>
<tr class="row-odd"><td>color_height</td>
<td>vertical resolution of the color images taken on the RealSense camera</td>
<td>480</td>
</tr>
<tr class="row-even"><td>motor_configs</td>
<td>the file path to the 'motor config' YAML file</td>
<td><a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/interbotix_xslocobot_control/launch/xslocobot_control.launch" rel="noopener noreferrer" target="_blank">refer to xslocobot_control.launch</a></td>
</tr>
<tr class="row-odd"><td>mode_configs</td>
<td>the file path to the 'mode config' YAML file</td>
<td><a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/blob/main/interbotix_ros_xslocobots/interbotix_xslocobot_control/launch/xslocobot_control.launch" rel="noopener noreferrer" target="_blank">refer to xslocobot_control.launch</a></td>
</tr>
<tr class="row-even"><td>load_configs</td>
<td>a boolean that specifies whether or not the initial register values (under the 'motors' heading) in a Motor Config file should be written to the motors; as the values being written are stored in each motor's EEPROM (which means the values are retained even after a power cycle), this can be set to false after the first time using the robot. Setting to false also shortens the node startup time by a few seconds and preserves the life of the EEPROM</td>
<td>true</td>
</tr>
<tr class="row-odd"><td>use_sim</td>
<td>if true, the DYNAMIXEL simulator node is run; use RViz to visualize the robot's motion; if false, the real DYNAMIXEL driver node is run</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="locobot_descriptions.html" class="btn btn-neutral float-left" title="LoCoBot Descriptions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gazebo_simulation_configuration.html" class="btn btn-neutral float-right" title="Gazebo Simulation Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Trossen Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>