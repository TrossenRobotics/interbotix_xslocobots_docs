<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Troubleshooting &mdash; Interbotix X-Series LoCoBot Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Joystick Control" href="ros2_packages/joystick_control.html" />
   
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-PZQLS2V"
      height="0"
      width="0"
      style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <div class="sidebartitle-docs-home">
    <a href="https://docs.trossenrobotics.com/" target="_blank" class="icon icon-home">
      &nbsp;Trossen Robotics Docs Home
    </a>
    <div class="sidebartitle-docs-home-hr">
      <hr>
    </div>
  </div>
  

          
          
          <a href="index.html">
            
              <img src="_static/logo_xslocobots.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros_interface.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_interface.html">Python-ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros1_packages.html">ROS 1 Open Source Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros2_packages.html">ROS 2 Open Source Packages</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#common-issues">Common Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-3-base-stutters-or-reflexed-are-triggered-when-driven">Create® 3 base stutters or reflexed are triggered when driven</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#less-common-issues">Less Common Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-3-base-clock-is-not-synchronized">Create® 3 base clock is not synchronized</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-t-see-echo-topics-published-by-locobot-on-remote-using-ros-1">Can't see/echo topics published by LoCoBot on remote using ROS 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-t-see-rviz-displays-on-remote-view-using-ros-1">Can't see RViz displays on remote view using ROS 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-id-on-parameter-server-does-not-match-declared-run-id-when-launching-on-remote-using-ros-1"><code class="docutils literal notranslate"><span class="pre">run_id</span> <span class="pre">on</span> <span class="pre">parameter</span> <span class="pre">server</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">match</span> <span class="pre">declared</span> <span class="pre">run_id</span></code> when launching on remote using ROS 1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Interbotix X-Series LoCoBots Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xslocobots_docs/blob/main/docs/troubleshooting.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"></a></h1>
<p>This guide walks a user through possible issues that can occur when using an Interbotix LoCoBot and
how to fix them. If, after following this guide, the issues persists, take a look at the
<a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/issues?q=is%3Aissue" rel="noopener noreferrer" target="_blank">interbotix_ros_rovers bug tracker</a>. If you can't find an answer there, feel free to <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_rovers/issues/new/choose" rel="noopener noreferrer" target="_blank">open your
own issue</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For troubleshooting tips on the mobile X-Series Arm or the pan-and-tilt camera mount, see the
<a class="reference external" href="https://www.trossenrobotics.com/docs/interbotix_xsarms/troubleshooting/index.html" rel="noopener noreferrer" target="_blank">X-Series Arms Troubleshooting documentation</a>.</p>
</div>
<div class="section" id="common-issues">
<h2>Common Issues<a class="headerlink" href="#common-issues" title="Permalink to this headline"></a></h2>
<div class="section" id="create-3-base-stutters-or-reflexed-are-triggered-when-driven">
<h3>Create® 3 base stutters or reflexed are triggered when driven<a class="headerlink" href="#create-3-base-stutters-or-reflexed-are-triggered-when-driven" title="Permalink to this headline"></a></h3>
<p>If the robot stops, turns, or reacts in an unexpected way when moving, it's possible that the
reflexes are not turned off on the Create® 3 base. To fix this, you can either set the
<code class="docutils literal notranslate"><span class="pre">&lt;base_namespace&gt;/motion_control</span> <span class="pre">reflexes_enabled</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> using the <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span>
<span class="pre">set</span></code> command line tool, or set it to <code class="docutils literal notranslate"><span class="pre">false</span></code> in the Application ROS 2 Parameters File located in
the Create® 3 webserver's ROS 2 Configuration page. If using Interbotix's default network
configuration, this will be at <code class="docutils literal notranslate"><span class="pre">192.168.186.2/ros-config</span></code>, assuming that the Create® 3 is turned
on. See the <a class="reference internal" href="getting_started/create3_configuration.html"><span class="doc">Create® 3 Configuration page</span></a> for more
information.</p>
</div>
</div>
<div class="section" id="less-common-issues">
<h2>Less Common Issues<a class="headerlink" href="#less-common-issues" title="Permalink to this headline"></a></h2>
<div class="section" id="create-3-base-clock-is-not-synchronized">
<h3>Create® 3 base clock is not synchronized<a class="headerlink" href="#create-3-base-clock-is-not-synchronized" title="Permalink to this headline"></a></h3>
<p>If transforms require a significant extrapolation into the past, it is possible that your Create® 3
base's clock is not in sync with the rest of your system. Errors like the one below may indicate
that this is the case.</p>
<div class="code-wrap docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span><span class="o">=</span><span class="s2">&quot;Lookup would require extrapolation -27793617.761847734s into the future. Requested time 1667324891.111343861 but the latest data is at time 1639531273.349496126, when looking up transform from frame [locobot/base_footprint] to frame [locobot/odom]. canTransform returned after 0.200389 timeout was 0.2.&quot;</span>
</pre></div>
</div>
</div>
<p>To solve this, check iRobot's <a class="reference external" href="https://iroboteducation.github.io/create3_docs/setup/compute-ntp/" rel="noopener noreferrer" target="_blank">Setup NTP on compute board to serve time to Create® 3</a> guide. In
short, the steps are as follows:</p>
<ol class="arabic">
<li><p class="first">On your LoCoBot's computer, install chrony NTP server package</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>chrony
</pre></div>
</div>
</li>
<li><p class="first">Edit the config file</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/chrony/chrony.conf
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To close nano with your changes, press <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">S</kbd> to save, and <kbd class="kbd docutils literal notranslate">Ctrl</kbd> +
<kbd class="kbd docutils literal notranslate">X</kbd> to exit.</p>
</div>
</li>
<li><p class="first">Add the following lines after the <code class="docutils literal notranslate"><span class="pre">pool</span> <span class="pre">#.ubuntu.pool.ntp.org</span> <span class="pre">iburst</span> <span class="pre">maxsources</span> <span class="pre">#</span></code> block</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="mf">192.168.186.2</span> <span class="n">presend</span> <span class="mi">0</span> <span class="n">minpoll</span> <span class="mi">0</span> <span class="n">maxpoll</span> <span class="mi">0</span> <span class="n">iburst</span>  <span class="n">prefer</span> <span class="n">trust</span>
<span class="c1"># Enable serving time to ntp clients on 192.168.186.0 subnet.</span>
<span class="n">allow</span> <span class="mf">192.168.186.0</span><span class="o">/</span><span class="mi">24</span>
</pre></div>
</div>
</li>
<li><p class="first">Optionally add the following lines immediately afterward if your LoCoBot's computer will not
have a connection to a reference clock (i.e., the Internet)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Serve time even if not synchronized to a time source</span>
<span class="n">local</span> <span class="n">stratum</span> <span class="mi">10</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart chrony</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>service<span class="w"> </span>chrony<span class="w"> </span>restart
</pre></div>
</div>
</li>
<li><p class="first">Verify compute NTP server is talking to the Create® 3</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>chronyc<span class="w"> </span>clients
</pre></div>
</div>
</li>
<li><p class="first">Confirm <code class="docutils literal notranslate"><span class="pre">192.168.182.2</span></code> shows non 0 number in NTP column</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Hostname</span>                      <span class="n">NTP</span>   <span class="n">Drop</span> <span class="n">Int</span> <span class="n">IntL</span> <span class="n">Last</span>     <span class="n">Cmd</span>   <span class="n">Drop</span> <span class="n">Int</span>  <span class="n">Last</span>
<span class="o">===============================================================================</span>
<span class="mf">192.168.186.2</span>                  <span class="mi">51</span>      <span class="mi">0</span>   <span class="mi">5</span>   <span class="o">-</span>    <span class="mi">32</span>       <span class="mi">0</span>      <span class="mi">0</span>   <span class="o">-</span>     <span class="o">-</span>
<span class="n">localhost</span>                       <span class="mi">0</span>      <span class="mi">0</span>   <span class="o">-</span>   <span class="o">-</span>     <span class="o">-</span>      <span class="mi">31</span>      <span class="mi">0</span>   <span class="mi">7</span>     <span class="mi">4</span>
</pre></div>
</div>
</li>
<li><p class="first">Note that if there is a large jump in the time, the Create® 3 may not accept it until its next
reboot. This can be verified by checking the Create® 3 robot's log for a line like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="o">.</span><span class="n">notice</span> <span class="n">ntpd</span><span class="p">:</span> <span class="n">ntpd</span><span class="p">:</span> <span class="n">reply</span> <span class="kn">from</span> <span class="mf">192.168.186.3</span><span class="p">:</span> <span class="n">delay</span> <span class="c1">### is too high, ignoring</span>
</pre></div>
</div>
<p>If this happens, simply restart the base (not just the application) via the webserver over the
USB network connection.</p>
</li>
<li><p class="first">Sometimes the NTP daemon can be a bit sticky and will not update the base's time even when
rebooted. In that case, you could connect the Create® 3 to your wireless network so that it can
contact iRobot's ntp pools. For details on this process, follow the &quot;Connect to Wi-Fi (ROS 2
Users)&quot; steps in the <a class="reference external" href="https://edu.irobot.com/create3-setup" rel="noopener noreferrer" target="_blank">Create® 3 Setup Guide</a>.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Sometimes it helps to disconnect both the Create® 3 and the LoCoBot's computer from the
Internet and just have them run on an isolated network.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As of Create® 3 firmware versions G.4.3 and H.1.0, you can use its webserver to restart the
ntpd from the Beta menu. This attempts to force the base to resync its clock. Because this is a
beta feature, it may not be stable and improper use may result in an inoperable robot. See
<a class="reference external" href="https://iroboteducation.github.io/create3_docs/webserver/restart-ntpd/" rel="noopener noreferrer" target="_blank">Restart ntpd</a> for details.</p>
</div>
</div>
<div class="section" id="can-t-see-echo-topics-published-by-locobot-on-remote-using-ros-1">
<span id="troubleshooting-cant-read-topics-label"></span><h3>Can't see/echo topics published by LoCoBot on remote using ROS 1<a class="headerlink" href="#can-t-see-echo-topics-published-by-locobot-on-remote-using-ros-1" title="Permalink to this headline"></a></h3>
<p>Your network may be configured incorrectly. See the <a class="reference external" href="http://wiki.ros.org/ROS/Tutorials/MultipleMachines" rel="noopener noreferrer" target="_blank">ROS Multiple Machines Tutorial</a> and the <a class="reference external" href="http://wiki.ros.org/ROS/NetworkSetup" rel="noopener noreferrer" target="_blank">ROS
Network Setup Tutorial</a>. This may be as simple as changing the value of the <code class="docutils literal notranslate"><span class="pre">ROS_IP</span></code> environment
variable. For example, your <code class="docutils literal notranslate"><span class="pre">ROS_IP</span></code> may be set to the value of the IP assigned in the connection
to the Create® 3 base via the Ethernet connection, <code class="docutils literal notranslate"><span class="pre">192.168.186.3</span></code>. To fix this, you can
explicitly assign the variable to the IP assigned in the connection to the wireless network through
the following steps:</p>
<ol class="arabic">
<li><p class="first">Find all IP addresses assigned to your LoCoBot computer. You should get two addresses: one for
the connection over the Ethernet network, and one for the connection over the wireless network.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>hostname<span class="w"> </span>-I
<span class="go">192.168.186.3 192.168.0.171</span>
</pre></div>
</div>
<p>If properly connected to the Ethernet network, that IP address will be <code class="docutils literal notranslate"><span class="pre">192.168.186.3</span></code>. The
address for the wireless network will be the other one, in this case, <code class="docutils literal notranslate"><span class="pre">192.168.0.171</span></code>.</p>
</li>
<li><p class="first">Edit the LoCoBot's .bashrc file</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nano<span class="w"> </span>~/.bashrc
</pre></div>
</div>
</li>
<li><p class="first">Find the <code class="docutils literal notranslate"><span class="pre">ROS_IP</span></code> section of the Interbotix Configurations block</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_IP</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="sb">`</span>hostname<span class="w"> </span>-I<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s2">&quot; &quot;</span><span class="w"> </span>-f1<span class="sb">`</span><span class="k">)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$ROS_IP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">       </span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_IP</span><span class="o">=</span><span class="m">127</span>.0.0.1
<span class="k">fi</span>
</pre></div>
</div>
</li>
<li><p class="first">Comment this block out and add a line exporting the IP address for the wireless network</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#export ROS_IP=$(echo `hostname -I | cut -d&quot; &quot; -f1`)</span>
<span class="c1">#if [ -z &quot;$ROS_IP&quot; ]; then</span>
<span class="c1">#       export ROS_IP=127.0.0.1</span>
<span class="c1">#fi</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ROS_IP</span><span class="o">=</span><span class="m">192</span>.168.0.171
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To close nano with your changes, press <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">S</kbd> to save, and <kbd class="kbd docutils literal notranslate">Ctrl</kbd> +
<kbd class="kbd docutils literal notranslate">X</kbd> to exit.</p>
</div>
</li>
<li><p class="first">Source your .bashrc file</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span><span class="w"> </span>~/.bashrc
</pre></div>
</div>
</li>
<li><p class="first">Your <code class="docutils literal notranslate"><span class="pre">ROS_IP</span></code> environment variable should now be properly assigned.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ROS_IP</span>
<span class="go">192.168.0.171</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="can-t-see-rviz-displays-on-remote-view-using-ros-1">
<h3>Can't see RViz displays on remote view using ROS 1<a class="headerlink" href="#can-t-see-rviz-displays-on-remote-view-using-ros-1" title="Permalink to this headline"></a></h3>
<p>See <a class="reference internal" href="#troubleshooting-cant-read-topics-label"><span class="std std-ref">Can't see/echo topics published by LoCoBot on
remote</span></a>.</p>
</div>
<div class="section" id="run-id-on-parameter-server-does-not-match-declared-run-id-when-launching-on-remote-using-ros-1">
<h3><code class="docutils literal notranslate"><span class="pre">run_id</span> <span class="pre">on</span> <span class="pre">parameter</span> <span class="pre">server</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">match</span> <span class="pre">declared</span> <span class="pre">run_id</span></code> when launching on remote using ROS 1<a class="headerlink" href="#run-id-on-parameter-server-does-not-match-declared-run-id-when-launching-on-remote-using-ros-1" title="Permalink to this headline"></a></h3>
<p>This occurs because roslaunch can't detect the roscore before starting up, leading to the run_id
mismatch. To solve this, simply append the <code class="docutils literal notranslate"><span class="pre">--wait</span></code> argument when running roslaunch. This tells
roslaunch to delay the launch until a roscore is detected.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch<span class="w"> </span>interbotix_xslocobot_descriptions<span class="w"> </span>remote_view.launch<span class="w"> </span>--wait
<span class="gp">#                                                                </span>^^^^^^
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ros2_packages/joystick_control.html" class="btn btn-neutral float-left" title="Joystick Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Trossen Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>